var _modalTemplateTempDiv=document.createElement("div");$.modalStack=[];$.modal=function(params){params=params||{};var modalHTML="";if(defaults.modalTemplate){if(!$._compiledTemplates.modal){$._compiledTemplates.modal=t7.compile(defaults.modalTemplate)}modalHTML=$._compiledTemplates.modal(params)}else{var buttonsHTML="";if(params.buttons&&params.buttons.length>0){for(var i=0;i<params.buttons.length;i++){buttonsHTML+='<span class="modal-button'+(params.buttons[i].bold?" modal-button-bold":"")+'">'+params.buttons[i].text+"</span>"}}var titleHTML=params.title?'<div class="modal-title">'+params.title+"</div>":"";var textHTML=params.text?'<div class="modal-text">'+params.text+"</div>":"";var afterTextHTML=params.afterText?params.afterText:"";var noButtons=!params.buttons||params.buttons.length===0?"modal-no-buttons":"";var verticalButtons=params.verticalButtons?"modal-buttons-vertical":"";modalHTML='<div class="modal '+noButtons+'"><div class="modal-inner">'+(titleHTML+textHTML+afterTextHTML)+'</div><div class="modal-buttons '+verticalButtons+'">'+buttonsHTML+"</div></div>"}_modalTemplateTempDiv.innerHTML=modalHTML;var modal=$(_modalTemplateTempDiv).children();$(defaults.modalContainer).append(modal[0]);modal.find(".modal-button").each(function(index,el){$(el).on("click",function(e){if(params.buttons[index].close!==false){$.closeModal(modal)}if(params.buttons[index].onClick){params.buttons[index].onClick(modal,e)}if(params.onClick){params.onClick(modal,index)}})});$.openModal(modal);return modal[0]};$.pickerModal=function(pickerModal,removeOnClose){if(typeof removeOnClose==="undefined"){removeOnClose=true}if(typeof pickerModal==="string"&&pickerModal.indexOf("<")>=0){pickerModal=$(pickerModal);if(pickerModal.length>0){if(removeOnClose){pickerModal.addClass("remove-on-close")}$(defaults.modalContainer).append(pickerModal[0])}else{return false}}pickerModal=$(pickerModal);if(pickerModal.length===0){return false}pickerModal.show();$.openModal(pickerModal);return pickerModal[0]
};$.openModal=function(modal){if(defaults.closePrevious){$.closeModal()}modal=$(modal);var isModal=modal.hasClass("modal");if($(".modal.modal-in:not(.modal-out)").length&&defaults.modalStack&&isModal){$.modalStack.push(function(){$.openModal(modal)});return}var isPopover=modal.hasClass("popover");var isPopup=modal.hasClass("popup");var isLoginScreen=modal.hasClass("login-screen");var isPickerModal=modal.hasClass("picker-modal");var isToast=modal.hasClass("toast");if(isModal){modal.show();modal.css({marginTop:-Math.round(modal.outerHeight()/2)+"px"})}if(isToast){modal.show();modal.css({marginLeft:-Math.round(modal.outerWidth()/1.18/2)+"px"})}var overlay;if(!isLoginScreen&&!isPickerModal&&!isToast){if($(".modal-overlay").length===0&&!isPopup){$(defaults.modalContainer).append('<div class="modal-overlay"></div>')}if($(".popup-overlay").length===0&&isPopup){$(defaults.modalContainer).append('<div class="popup-overlay"></div>')}overlay=isPopup?$(".popup-overlay"):$(".modal-overlay")}var clientLeft=modal[0].clientLeft;modal.trigger("open");if(isPickerModal){$(defaults.modalContainer).addClass("with-picker-modal")}if(!isLoginScreen&&!isPickerModal&&!isToast){overlay.addClass("modal-overlay-visible")}modal.removeClass("modal-out").addClass("modal-in").transitionEnd(function(e){if(modal.hasClass("modal-out")){modal.trigger("closed")}else{modal.trigger("opened")}});return true};$.closeModal=function(modal){modal=$(modal||".modal-in");if(typeof modal!=="undefined"&&modal.length===0){return}var isModal=modal.hasClass("modal");var isPopover=modal.hasClass("popover");var isPopup=modal.hasClass("popup");var isLoginScreen=modal.hasClass("login-screen");var isPickerModal=modal.hasClass("picker-modal");var removeOnClose=modal.hasClass("remove-on-close");var overlay=isPopup?$(".popup-overlay"):$(".modal-overlay");if(isPopup){if(modal.length===$(".popup.modal-in").length){overlay.removeClass("modal-overlay-visible")}}else{if(!isPickerModal){overlay.removeClass("modal-overlay-visible")}}modal.trigger("close");
if(isPickerModal){$(defaults.modalContainer).removeClass("with-picker-modal");$(defaults.modalContainer).addClass("picker-modal-closing")}if(!isPopover){modal.removeClass("modal-in").addClass("modal-out").transitionEnd(function(e){if(modal.hasClass("modal-out")){modal.trigger("closed")}else{modal.trigger("opened")}if(isPickerModal){$(defaults.modalContainer).removeClass("picker-modal-closing")}if(isPopup||isLoginScreen||isPickerModal){modal.removeClass("modal-out").hide();if(removeOnClose&&modal.length>0){modal.remove()}}else{modal.remove()}});if(isModal&&defaults.modalStack){$.modalStackClearQueue()}}else{modal.removeClass("modal-in modal-out").trigger("closed").hide();if(removeOnClose){modal.remove()}}return true};var defaults=$.modal.prototype.defaults={modalContainer:document.body};$(function(){$(document).on("click",".close-picker",function(){$.closeModal(".modal.modal-in")})});
["width","height"].forEach(function(dimension){var Dimension=dimension.replace(/./,function(m){return m[0].toUpperCase()});$.fn["outer"+Dimension]=function(margin){var elem=this;if(elem){var size=elem[dimension]();var sides={"width":["left","right"],"height":["top","bottom"]};sides[dimension].forEach(function(side){if(margin){size+=parseInt(elem.css("margin-"+side),10)}});return size}else{return null}}});$.noop=function(){};$.support=(function(){var support={touch:!!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch)};return support})();$.touchEvents={start:$.support.touch?"touchstart":"mousedown",move:$.support.touch?"touchmove":"mousemove",end:$.support.touch?"touchend":"mouseup"};$.getTranslate=function(el,axis){var matrix,curTransform,curStyle,transformMatrix;if(typeof axis==="undefined"){axis="x"}curStyle=window.getComputedStyle(el,null);if(window.WebKitCSSMatrix){transformMatrix=new WebKitCSSMatrix(curStyle.webkitTransform==="none"?"":curStyle.webkitTransform)}else{transformMatrix=curStyle.MozTransform||curStyle.OTransform||curStyle.MsTransform||curStyle.msTransform||curStyle.transform||curStyle.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");matrix=transformMatrix.toString().split(",")}if(axis==="x"){if(window.WebKitCSSMatrix){curTransform=transformMatrix.m41}else{if(matrix.length===16){curTransform=parseFloat(matrix[12])}else{curTransform=parseFloat(matrix[4])}}}if(axis==="y"){if(window.WebKitCSSMatrix){curTransform=transformMatrix.m42}else{if(matrix.length===16){curTransform=parseFloat(matrix[13])}else{curTransform=parseFloat(matrix[5])}}}return curTransform||0};$.requestAnimationFrame=function(callback){if(window.requestAnimationFrame){return window.requestAnimationFrame(callback)}else{if(window.webkitRequestAnimationFrame){return window.webkitRequestAnimationFrame(callback)}else{if(window.mozRequestAnimationFrame){return window.mozRequestAnimationFrame(callback)}else{return window.setTimeout(callback,1000/60)
}}}};$.cancelAnimationFrame=function(id){if(window.cancelAnimationFrame){return window.cancelAnimationFrame(id)}else{if(window.webkitCancelAnimationFrame){return window.webkitCancelAnimationFrame(id)}else{if(window.mozCancelAnimationFrame){return window.mozCancelAnimationFrame(id)}else{return window.clearTimeout(id)}}}};$.fn.transitionEnd=function(callback){var events=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i,dom=this;function fireCallBack(e){if(e.target!==this){return}callback.call(this,e);for(i=0;i<events.length;i++){dom.off(events[i],fireCallBack)}}if(callback){for(i=0;i<events.length;i++){dom.on(events[i],fireCallBack)}}return this};$.fn.animationEnd=function(callback){var events=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i,dom=this;function fireCallBack(e){callback(e);for(i=0;i<events.length;i++){dom.off(events[i],fireCallBack)}}if(callback){for(i=0;i<events.length;i++){dom.on(events[i],fireCallBack)}}return this};$.fn.transition=function(duration){if(typeof duration!=="string"){duration=duration+"ms"}for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransitionDuration=elStyle.MsTransitionDuration=elStyle.msTransitionDuration=elStyle.MozTransitionDuration=elStyle.OTransitionDuration=elStyle.transitionDuration=duration}return this};$.fn.transform=function(transform){for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransform=elStyle.MsTransform=elStyle.msTransform=elStyle.MozTransform=elStyle.OTransform=elStyle.transform=transform}return this};$.fn.show=function(){var elementDisplay={};function defaultDisplay(nodeName){var element,display;if(!elementDisplay[nodeName]){element=document.createElement(nodeName);document.body.appendChild(element);display=getComputedStyle(element,"").getPropertyValue("display");element.parentNode.removeChild(element);display==="none"&&(display="block");elementDisplay[nodeName]=display}return elementDisplay[nodeName]
}return this.each(function(){this.style.display==="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")==="none"){}this.style.display=defaultDisplay(this.nodeName)})};$.getTouchPosition=function(e){e=e.originalEvent||e;if(e.type==="touchstart"||e.type==="touchmove"||e.type==="touchend"){return{x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}}else{return{x:e.pageX,y:e.pageY}}};var device={};var ua=navigator.userAgent;var android=ua.match(/(Android);?[\s\/]+([\d.]+)?/);var ipad=ua.match(/(iPad).*OS\s([\d_]+)/);var ipod=ua.match(/(iPod)(.*OS\s([\d_]+))?/);var iphone=!ipad&&ua.match(/(iPhone\sOS)\s([\d_]+)/);device.ios=device.android=device.iphone=device.ipad=device.androidChrome=false;if(android){device.os="android";device.osVersion=android[2];device.android=true;device.androidChrome=ua.toLowerCase().indexOf("chrome")>=0}if(ipad||iphone||ipod){device.os="ios";device.ios=true}if(iphone&&!ipod){device.osVersion=iphone[2].replace(/_/g,".");device.iphone=true}if(ipad){device.osVersion=ipad[2].replace(/_/g,".");device.ipad=true}if(ipod){device.osVersion=ipod[3]?ipod[3].replace(/_/g,"."):null;device.iphone=true}if(device.ios&&device.osVersion&&ua.indexOf("Version/")>=0){if(device.osVersion.split(".")[0]==="10"){device.osVersion=ua.toLowerCase().split("version/")[1].split(" ")[0]}}device.webView=(iphone||ipad||ipod)&&ua.match(/.*AppleWebKit(?!.*Safari)/i);if(device.os&&device.os==="ios"){var osVersionArr=device.osVersion.split(".");device.minimalUi=!device.webView&&(ipod||iphone)&&(osVersionArr[0]*1===7?osVersionArr[1]*1>=1:osVersionArr[0]*1>7)&&$('meta[name="viewport"]').length>0&&$('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var windowWidth=$(window).width();var windowHeight=$(window).height();device.statusBar=false;if(device.webView&&(windowWidth*windowHeight===screen.width*screen.height)){device.statusBar=true}else{device.statusBar=false}var classNames=[];device.pixelRatio=window.devicePixelRatio||1;classNames.push("pixel-ratio-"+Math.floor(device.pixelRatio));
if(device.pixelRatio>=2){classNames.push("retina")}if(device.os){classNames.push(device.os,device.os+"-"+device.osVersion.split(".")[0],device.os+"-"+device.osVersion.replace(/\./g,"-"));if(device.os==="ios"){var major=parseInt(device.osVersion.split(".")[0],10);for(var i=major-1;i>=6;i--){classNames.push("ios-gt-"+i)}}}if(device.statusBar){classNames.push("with-statusbar-overlay")}else{$("html").removeClass("with-statusbar-overlay")}if(classNames.length>0){$("html").addClass(classNames.join(" "))}$.device=device;var Picker=function(params){var p=this;var defaults={updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,scrollToInput:true,inputReadOnly:true,convertToPopover:true,onlyInPopover:false,toolbar:true,};params=params||{};for(var def in defaults){if(typeof params[def]==="undefined"){params[def]=defaults[def]}}p.params=params;p.cols=[];p.initialized=false;p.inline=p.params.container?true:false;var originBug=true;p.setValue=function(arrValues,transition){var valueIndex=0;for(var i=0;i<p.cols.length;i++){if(p.cols[i]&&!p.cols[i].divider){p.cols[i].setValue(arrValues[valueIndex],transition);valueIndex++}}};p.updateValue=function(){var newValue=[];var newDisplayValue=[];for(var i=0;i<p.cols.length;i++){if(!p.cols[i].divider){newValue.push(p.cols[i].value);newDisplayValue.push(p.cols[i].displayValue)}}if(newValue.indexOf(undefined)>=0){return}p.value=newValue;p.displayValue=newDisplayValue;$(".confirm-picker").on("click",function(event){$(p.input).val(p.params.formatValue?p.params.formatValue(p,p.value,p.displayValue):p.value.join(" "));$(p.input).trigger("change")})};p.initPickerCol=function(colElement,updateItems){var colContainer=$(colElement);var colIndex=colContainer.index();var col=p.cols[colIndex];if(col.divider){return}col.container=colContainer;col.wrapper=col.container.find(".picker-items-col-wrapper");col.items=col.wrapper.find(".picker-item");var i,j;var wrapperHeight,itemHeight,itemsHeight,minTranslate,maxTranslate;
col.replaceValues=function(values,displayValues){col.destroyEvents();col.values=values;col.displayValues=displayValues;var newItemsHTML=p.columnHTML(col,true);col.wrapper.html(newItemsHTML);col.items=col.wrapper.find(".picker-item");col.calcSize();col.setValue(col.values[0],0,true);col.initEvents()};col.calcSize=function(){if(p.params.rotateEffect){col.container.removeClass("picker-items-col-absolute");if(!col.width){col.container.css({width:""})}}var colWidth,colHeight;colWidth=0;colHeight=col.container[0].offsetHeight;wrapperHeight=col.wrapper[0].offsetHeight;itemHeight=col.items[0].offsetHeight;itemsHeight=itemHeight*col.items.length;minTranslate=colHeight/2-itemsHeight+itemHeight/2;maxTranslate=colHeight/2-itemHeight/2;if(col.width){colWidth=col.width;if(parseInt(colWidth,10)===colWidth){colWidth=colWidth+"px"}col.container.css({width:colWidth})}if(p.params.rotateEffect){if(!col.width){col.items.each(function(){var item=$(this);item.css({width:"auto"});colWidth=Math.max(colWidth,item[0].offsetWidth);item.css({width:""})});col.container.css({width:(colWidth+2)+"px"})}col.container.addClass("picker-items-col-absolute")}};col.calcSize();col.wrapper.transform("translate3d(0,"+maxTranslate+"px,0)").transition(0);var activeIndex=0;var animationFrameId;col.setValue=function(newValue,transition,valueCallbacks){if(typeof transition==="undefined"){transition=""}var newActiveIndex=col.wrapper.find('.picker-item[data-picker-value="'+newValue+'"]').index();if(typeof newActiveIndex==="undefined"||newActiveIndex===-1){return}var newTranslate=-newActiveIndex*itemHeight+maxTranslate;col.wrapper.transition(transition);col.wrapper.transform("translate3d(0,"+(newTranslate)+"px,0)");if(p.params.updateValuesOnMomentum&&col.activeIndex&&col.activeIndex!==newActiveIndex){$.cancelAnimationFrame(animationFrameId);col.wrapper.transitionEnd(function(){$.cancelAnimationFrame(animationFrameId)});updateDuringScroll()}col.updateItems(newActiveIndex,newTranslate,transition,valueCallbacks)};col.updateItems=function(activeIndex,translate,transition,valueCallbacks){if(typeof translate==="undefined"){translate=$.getTranslate(col.wrapper[0],"y")
}if(typeof activeIndex==="undefined"){activeIndex=-Math.round((translate-maxTranslate)/itemHeight)}if(activeIndex<0){activeIndex=0}if(activeIndex>=col.items.length){activeIndex=col.items.length-1}var previousActiveIndex=col.activeIndex;col.activeIndex=activeIndex;col.wrapper.find(".picker-selected").removeClass("picker-selected");if(p.params.rotateEffect){col.items.transition(transition)}var selectedItem=col.items.eq(activeIndex).addClass("picker-selected").transform("");if(valueCallbacks||typeof valueCallbacks==="undefined"){col.value=selectedItem.attr("data-picker-value");col.displayValue=col.displayValues?col.displayValues[activeIndex]:col.value;if(previousActiveIndex!==activeIndex){if(col.onChange){col.onChange(p,col.value,col.displayValue)}p.updateValue()}}if(!p.params.rotateEffect){return}var percentage=(translate-(Math.floor((translate-maxTranslate)/itemHeight)*itemHeight+maxTranslate))/itemHeight;col.items.each(function(){var item=$(this);var itemOffsetTop=item.index()*itemHeight;var translateOffset=maxTranslate-translate;var itemOffset=itemOffsetTop-translateOffset;var percentage=itemOffset/itemHeight;var itemsFit=Math.ceil(col.height/itemHeight/2)+1;var angle=(-18*percentage);if(angle>180){angle=180}if(angle<-180){angle=-180}if(Math.abs(percentage)>itemsFit){item.addClass("picker-item-far")}else{item.removeClass("picker-item-far")}item.transform("translate3d(0, "+(-translate+maxTranslate)+"px, "+(originBug?-110:0)+"px) rotateX("+angle+"deg)")})};function updateDuringScroll(){animationFrameId=$.requestAnimationFrame(function(){col.updateItems(undefined,undefined,0);updateDuringScroll()})}if(updateItems){col.updateItems(0,maxTranslate,0)}var allowItemClick=true;var isTouched,isMoved,touchStartY,touchCurrentY,touchStartTime,touchEndTime,startTranslate,returnTo,currentTranslate,prevTranslate,velocityTranslate,velocityTime;function handleTouchStart(e){if(isMoved||isTouched){return}e.preventDefault();isTouched=true;var position=$.getTouchPosition(e);touchStartY=touchCurrentY=position.y;
touchStartTime=(new Date()).getTime();allowItemClick=true;startTranslate=currentTranslate=$.getTranslate(col.wrapper[0],"y")}function handleTouchMove(e){if(!isTouched){return}e.preventDefault();allowItemClick=false;var position=$.getTouchPosition(e);touchCurrentY=position.y;if(!isMoved){$.cancelAnimationFrame(animationFrameId);isMoved=true;startTranslate=currentTranslate=$.getTranslate(col.wrapper[0],"y");col.wrapper.transition(0)}e.preventDefault();var diff=touchCurrentY-touchStartY;currentTranslate=startTranslate+diff;returnTo=undefined;if(currentTranslate<minTranslate){currentTranslate=minTranslate-Math.pow(minTranslate-currentTranslate,0.8);returnTo="min"}if(currentTranslate>maxTranslate){currentTranslate=maxTranslate+Math.pow(currentTranslate-maxTranslate,0.8);returnTo="max"}col.wrapper.transform("translate3d(0,"+currentTranslate+"px,0)");col.updateItems(undefined,currentTranslate,0,p.params.updateValuesOnTouchmove);velocityTranslate=currentTranslate-prevTranslate||currentTranslate;velocityTime=(new Date()).getTime();prevTranslate=currentTranslate}function handleTouchEnd(e){if(!isTouched||!isMoved){isTouched=isMoved=false;return}isTouched=isMoved=false;col.wrapper.transition("");if(returnTo){if(returnTo==="min"){col.wrapper.transform("translate3d(0,"+minTranslate+"px,0)")}else{col.wrapper.transform("translate3d(0,"+maxTranslate+"px,0)")}}touchEndTime=new Date().getTime();var velocity,newTranslate;if(touchEndTime-touchStartTime>300){newTranslate=currentTranslate}else{velocity=Math.abs(velocityTranslate/(touchEndTime-velocityTime));newTranslate=currentTranslate+velocityTranslate*p.params.momentumRatio}newTranslate=Math.max(Math.min(newTranslate,maxTranslate),minTranslate);var activeIndex=-Math.floor((newTranslate-maxTranslate)/itemHeight);if(!p.params.freeMode){newTranslate=-activeIndex*itemHeight+maxTranslate}col.wrapper.transform("translate3d(0,"+(parseInt(newTranslate,10))+"px,0)");col.updateItems(activeIndex,newTranslate,"",true);if(p.params.updateValuesOnMomentum){updateDuringScroll();
col.wrapper.transitionEnd(function(){$.cancelAnimationFrame(animationFrameId)})}setTimeout(function(){allowItemClick=true},100)}function handleClick(e){if(!allowItemClick){return}$.cancelAnimationFrame(animationFrameId);var value=$(this).attr("data-picker-value");col.setValue(value)}col.initEvents=function(detach){var method=detach?"off":"on";col.container[method]($.touchEvents.start,handleTouchStart);col.container[method]($.touchEvents.move,handleTouchMove);col.container[method]($.touchEvents.end,handleTouchEnd);col.items[method]("click",handleClick)};col.destroyEvents=function(){col.initEvents(true)};col.container[0].f7DestroyPickerCol=function(){col.destroyEvents()};col.initEvents()};p.destroyPickerCol=function(colContainer){colContainer=$(colContainer);if("f7DestroyPickerCol" in colContainer[0]){colContainer[0].f7DestroyPickerCol()}};function resizeCols(){if(!p.opened){return}for(var i=0;i<p.cols.length;i++){if(!p.cols[i].divider){p.cols[i].calcSize();p.cols[i].setValue(p.cols[i].value,0,false)}}}$(window).on("resize",resizeCols);p.columnHTML=function(col,onlyItems){var columnItemsHTML="";var columnHTML="";if(col.divider){columnHTML+='<div class="picker-items-col picker-items-col-divider '+(col.textAlign?"picker-items-col-"+col.textAlign:"")+" "+(col.cssClass||"")+'">'+col.content+"</div>"}else{for(var j=0;j<col.values.length;j++){columnItemsHTML+='<div class="picker-item" data-picker-value="'+col.values[j]+'">'+(col.displayValues?col.displayValues[j]:col.values[j])+"</div>"}columnHTML+='<div class="picker-items-col '+(col.textAlign?"picker-items-col-"+col.textAlign:"")+" "+(col.cssClass||"")+'"><div class="picker-items-col-wrapper">'+columnItemsHTML+"</div></div>"}return onlyItems?columnItemsHTML:columnHTML};p.layout=function(){var pickerHTML="";var pickerClass="";var i;p.cols=[];var colsHTML="";for(i=0;i<p.params.cols.length;i++){var col=p.params.cols[i];colsHTML+=p.columnHTML(p.params.cols[i]);p.cols.push(col)}pickerClass="picker-modal picker-columns "+(p.params.cssClass||"")+(p.params.rotateEffect?" picker-3d":"");
pickerHTML='<div class="'+(pickerClass)+'">'+(p.params.toolbar?p.params.toolbarTemplate.replace(/{{closeText}}/g,p.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+colsHTML+'<div class="picker-center-highlight"></div>'+"</div>"+"</div>";p.pickerHTML=pickerHTML};function openOnInput(e){e.preventDefault();if(p.opened){return}p.open();if(p.params.scrollToInput){var pageContent=p.input.parents(".content");if(pageContent.length===0){return}var paddingTop=parseInt(pageContent.css("padding-top"),10),paddingBottom=parseInt(pageContent.css("padding-bottom"),10),pageHeight=pageContent[0].offsetHeight-paddingTop-p.container.height(),pageScrollHeight=pageContent[0].scrollHeight-paddingTop-p.container.height(),newPaddingBottom;var inputTop=p.input.offset().top-paddingTop+p.input[0].offsetHeight;if(inputTop>pageHeight){var scrollTop=pageContent.scrollTop()+inputTop-pageHeight;if(scrollTop+pageHeight>pageScrollHeight){newPaddingBottom=scrollTop+pageHeight-pageScrollHeight+paddingBottom;if(pageHeight===pageScrollHeight){newPaddingBottom=p.container.height()}pageContent.css({"padding-bottom":(newPaddingBottom)+"px"})}pageContent.scrollTop(scrollTop,300)}}}function closeOnHTMLClick(e){if(false){return}if(p.input&&p.input.length>0){if(e.target!==p.input[0]&&$(e.target).parents(".picker-modal").length===0){p.close()}}else{if($(e.target).parents(".picker-modal").length===0){p.close()}}}if(p.params.input){p.input=$(p.params.input);if(p.input.length>0){if(p.params.inputReadOnly){p.input.prop("readOnly",true)}if(!p.inline){p.input.on("click",openOnInput)}if(p.params.inputReadOnly){p.input.on("focus mousedown",function(e){e.preventDefault()})}}}if(!p.inline){$("html").on("click",closeOnHTMLClick)}function onPickerClose(){p.opened=false;if(p.input&&p.input.length>0){p.input.parents(".page-content").css({"padding-bottom":""})}if(p.params.onClose){p.params.onClose(p)}p.container.find(".picker-items-col").each(function(){p.destroyPickerCol(this)})}p.opened=false;p.open=function(){var toPopover=false;
if(!p.opened){p.layout();if(toPopover){p.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+p.pickerHTML+"</div></div>";p.popover=$.popover(p.pickerHTML,p.params.input,true);p.container=$(p.popover).find(".picker-modal");$(p.popover).on("close",function(){onPickerClose()})}else{if(p.inline){p.container=$(p.pickerHTML);p.container.addClass("picker-modal-inline");$(p.params.container).append(p.container)}else{p.container=$($.pickerModal(p.pickerHTML));$(p.container).on("close",function(){onPickerClose()})}}p.container[0].f7Picker=p;p.container.find(".picker-items-col").each(function(){var updateItems=true;if((!p.initialized&&p.params.value)||(p.initialized&&p.value)){updateItems=false}p.initPickerCol(this,updateItems)});if(!p.initialized){if(p.params.value){p.setValue(p.params.value,0)}}else{if(p.value){p.setValue(p.value,0)}}}p.opened=true;p.initialized=true;if(p.params.onOpen){p.params.onOpen(p)}};p.close=function(){if(!p.opened||p.inline){return}$.closeModal(p.container);return};p.destroy=function(){p.close();if(p.params.input&&p.input.length>0){p.input.off("click focus",openOnInput)}$("html").off("click",closeOnHTMLClick);$(window).off("resize",resizeCols)};if(p.inline){p.open()}return p};$(document).on("click",".close-picker",function(){var pickerToClose=$(".picker-modal.modal-in");if(pickerToClose.length>0){$.closeModal(pickerToClose)}else{pickerToClose=$(".popover.modal-in .picker-modal");if(pickerToClose.length>0){$.closeModal(pickerToClose.parents(".popover"))}}});$(document).on($.touchEvents.move,".picker-modal-inner",function(e){e.preventDefault()});$.fn.picker=function(params){var args=arguments;return this.each(function(){if(!this){return}var $this=$(this);var picker=$this.data("picker");if(!picker){params=params||{};var inputValue=$this.val();if(params.value===undefined&&inputValue!==""){params.value=params.cols.length>1?inputValue.split(" "):[inputValue]}var p=$.extend({input:this},params);picker=new Picker(p);$this.data("picker",picker)
}if(typeof params===typeof"a"){picker[params].apply(picker,Array.prototype.slice.call(args,1))}})};
